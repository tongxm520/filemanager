<!--img title="rails" src="uploads/图片/rails.png"  alt="rails"-->

<div class="filemgr-toolbar">
  <button class="filemgr-img-btn" type="button">
    <div class="toolbar-imgs"><img src="/assets/plus.png" ></div>
    新建文件夹
  </button>
  <div class="filemgr-img-btn path-width path-margin">
    <div class="container_18 cf">
      <ol class="file-path grid_18 cf">                  
        <li>根目录</li>                           
        <li>工作文档</li>
        <li>统计报表</li>
        <li>美国地区</li>
      </ol>
    </div>
  </div>

  <button class="filemgr-img-btn" type="button">
    <div class="toolbar-imgs"><img src="/assets/upload.png" ></div>
    上传文件
  </button>
  <button class="filemgr-img-btn" type="button">
    <div class="toolbar-imgs"><img src="/assets/actions.png" ></div>
    文件操作
  </button>
  
  <div class="search-box">
    <input type="text" class="search-panel">
    <button type="submit" class="submit-btn" value="search">&nbsp;</button>
  </div>

  <div class="data-view">
  <button class="table-view view-selected" style="width:78px" type="button">Table</button>
  <button class="icon-view" style="width:78px" type="button">Icons</button>
  </div>
</div>
<div class="columns">
	<div class="left">
    <ul id="treeDemo" class="ztree"></ul>
	</div>
	<div class="handler">
	</div>
	<div class="center">
   <table cellspacing="0" cellpadding="0"  role="presentation">
		<tbody>
		<tr>
      <th style="width:645px;">Name</th>
      <th style="width:430px;">Date</th>
      <th style="width:315px;">Type</th>
      <th style="width:315px;">Size</th>
    </tr>
    <tr role="row">
      <td>
      <div class="webix_hcell">Overview Asia.doc</div>
      </td>
      <td>
      <div class="webix_hcell">03/10/2014 04:10 PM</div>
      </td>
      <td>
      <div class="webix_hcell">Document</div>
      </td>
      <td>
      <div class="webix_hcell">14.678KB</div>
      </td>
    </tr>
    <tr role="row">
      <td>
      <div class="webix_hcell">Overview Asia.doc</div>
      </td>
      <td>
      <div class="webix_hcell">03/10/2014 04:10 PM</div>
      </td>
      <td>
      <div class="webix_hcell">Document</div>
      </td>
      <td>
      <div class="webix_hcell">14.678KB</div>
      </td>
    </tr>
    <tr role="row">
      <td>
      <div class="webix_hcell">Overview Asia.doc</div>
      </td>
      <td>
      <div class="webix_hcell">03/10/2014 04:10 PM</div>
      </td>
      <td>
      <div class="webix_hcell">Document</div>
      </td>
      <td>
      <div class="webix_hcell">14.678KB</div>
      </td>
    </tr>
    <tr role="row">
      <td>
      <div class="webix_hcell">Overview Asia.doc</div>
      </td>
      <td>
      <div class="webix_hcell">03/10/2014 04:10 PM</div>
      </td>
      <td>
      <div class="webix_hcell">Document</div>
      </td>
      <td>
      <div class="webix_hcell">14.678KB</div>
      </td>
    </tr>
		</tbody>
	</table>
	</div>
</div>

<script type="text/javascript">
	
	var setting = {
    view: {
		  showLine: false
		},
		data: {
			simpleData: {
				enable: true
			}
		}
	};
  
  var zNodes=JSON.parse('<%=raw @docs.to_json %>');
  //alert(zNodes);
	/*var zNodes =[
		{ id:1, pId:0, name:"hello - 展开", open:true},
		{ id:11, pId:1, name:"父节点11 - 折叠"},
		{ id:111, pId:11, name:"叶子节点111"},
		{ id:112, pId:11, name:"叶子节点112"},
		{ id:113, pId:11, name:"叶子节点113"},
		{ id:114, pId:11, name:"叶子节点114"},
		{ id:12, pId:1, name:"父节点12 - 折叠"},
		{ id:121, pId:12, name:"叶子节点121"},
		{ id:122, pId:12, name:"叶子节点122"},
		{ id:123, pId:12, name:"叶子节点123"},
		{ id:124, pId:12, name:"叶子节点124"},
		{ id:13, pId:1, name:"父节点13 - 没有子节点", isParent:true},
		{ id:2, pId:0, name:"父节点2 - 折叠"},
		{ id:21, pId:2, name:"父节点21 - 展开", open:true},
		{ id:211, pId:21, name:"叶子节点211"},
		{ id:212, pId:21, name:"叶子节点212"},
		{ id:213, pId:21, name:"叶子节点213"},
		{ id:214, pId:21, name:"叶子节点214"},
		{ id:22, pId:2, name:"父节点22 - 折叠"},
		{ id:221, pId:22, name:"叶子节点221"},
		{ id:222, pId:22, name:"叶子节点222"},
		{ id:223, pId:22, name:"叶子节点223"},
		{ id:224, pId:22, name:"叶子节点224"},
		{ id:23, pId:2, name:"父节点23 - 折叠"},
		{ id:231, pId:23, name:"叶子节点231"},
		{ id:232, pId:23, name:"叶子节点232"},
		{ id:233, pId:23, name:"叶子节点233"},
		{ id:234, pId:23, name:"叶子节点234"},
		{ id:3, pId:0, name:"父节点3 - 没有子节点", isParent:false,icon:"/assets/zTreeStyle/img/diy/folder_close.png"}
	];*/

	$(document).ready(function(){
		$.fn.zTree.init($("#treeDemo"), setting, zNodes);
	});
	

/*
var txt = '{ "employees" : [' +  
'{ "firstName":"John" , "lastName":"Doe" },' +  
'{ "firstName":"Anna" , "lastName":"Smith" },' +  
'{ "firstName":"Peter" , "lastName":"Jones" } ]}';  

JSON数据转换为JavaScript对象
obj = JSON.parse(txt); 

JavaScript对象转换为JSON数据
var txt = JSON.stringify(obj); 
*/

jQuery(function($){
  var doc = $(document), dl = $("div.left"), dc = $("div.center");
  var sum = dl.width() + dc.width() + $("div.handler").mousedown(function (e) {
		var me = $(this);
		var deltaX = e.clientX - (parseFloat(me.css("left")) || parseFloat(me.prop("clientLeft")));
		doc.mousemove(function (e){
			var lt = e.clientX - deltaX; 
			lt = lt < 261 ? 261 : lt;
			lt = lt > sum - me.width()-1000 ? sum - me.width()-1000 : lt;
			me.css("left",lt + "px");
			dl.width(lt);
      var left=lt+me.width();
      dc.css("left",left + "px");
			dc.width(sum-lt-me.width()+10);
		});
  }).width();

	doc.mouseup (function(){
		doc.unbind("mousemove");
	});
	doc[0].ondragstart = doc[0].onselectstart = function(){return false;};
	});
</script>


